name: Build and Release PDFs

on:
  push:
    branches:
      - main

jobs:
  build-and-release-pdfs:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Build PDFs
      uses: xu-cheng/latex-action@v3
      with:
        root_file: |
          statistics.tex
          probability.tex
          ml.tex

    - name: Install GitHub CLI
      run: sudo apt install -y gh

    - name: Authenticate GitHub CLI
      run: gh auth login --with-token ${{ secrets.GITHUB_TOKEN }}

    - name: Create Release and Upload Multiple PDFs
      run: gh release create v1.0.0 ./statistics.pdf ./probability.pdf ./ml.pdf --title "First release" --notes "First release of the cheatsheets"
